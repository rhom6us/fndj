{"version":3,"file":"gapi.js","sourceRoot":"","sources":["../src/gapi.ts"],"names":[],"mappings":"AAAA,MAAM,EAAE,GAAG,aAAa,CAAC;AACzB,SAAS,UAAU,CAAC,GAAG,GAAG,mCAAmC;IACzD,OAAO,IAAI,OAAO,CAAO,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;QACzC,IAAI,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,EAAE,CAA6B,CAAC;QACrE,IAAI,MAAM,EAAE;YACR,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE;gBACd,MAAM,CAAC,+DAA+D,CAAC,CAAC;gBACxE,OAAO;aACV;YACD,OAAO,EAAE,CAAC;YACV,OAAO;SACV;QACD,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAC1C,MAAM,CAAC,EAAE,GAAG,EAAE,CAAC;QACf,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC;QACjB,MAAM,CAAC,WAAW,GAAG,WAAW,CAAA;QAChC,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,OAAO,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;QAEjE,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;IACtC,CAAC,CAAC,CAAC;AACP,CAAC;AACD,gBAAgB;AAChB,MAAM,CAAC,MAAM,MAAM,GAAG,UAAU,EAAE,CAAC;AAMnC,gBAAgB;AAChB,MAAM,CAAC,KAAK,UAAU,OAAO,CAAuB,GAAM;IACtD,MAAM,MAAM,CAAC;IACb,OAAO,IAAI,OAAO,CAAU,CAAC,OAAO,EAAE,EAAE;QACpC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAC7C,CAAC,CAAC,CAAC;AACP,CAAC","sourcesContent":["const id = 'gapi-script';\nfunction loadScript(src = 'https://apis.google.com/js/api.js') {\n    return new Promise<void>((resolve, reject) => {\n        let script = document.getElementById(id) as HTMLScriptElement | null;\n        if (script) {\n            if (!window.gapi) {\n                reject(`script was already loaded but \"gapi\" global couldn't be found`);\n                return;\n            }\n            resolve();\n            return;\n        }\n        script = document.createElement('script');\n        script.id = id;\n        script.src = src;\n        script.crossOrigin = 'anonymous'\n        script.addEventListener('load', () => resolve(), { once: true });\n\n        document.head.appendChild(script);\n    });\n}\n/** @internal */\nexport const loaded = loadScript();\n\n\n/** @internal */\nexport type gapi = typeof gapi;\n\n/** @internal */\nexport async function loadLib<K extends keyof gapi>(lib: K): Promise<gapi[K]> {\n    await loaded;\n    return new Promise<gapi[K]>((resolve) => {\n        gapi.load(lib, () => resolve(gapi[lib]));\n    });\n}\n"]}