{"version":3,"file":"setImmediateAsync.js","sourceRoot":"","sources":["../src/setImmediateAsync.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,cAAc,EAAE,YAAY,EAAE,MAAM,wBAAwB,CAAC;AAQtE,MAAM,UAAU,iBAAiB,CAAC,GAAG,IAAS;IAC1C,MAAM,CAAC,KAAK,EAAE,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC;IAC9B,MAAM,MAAM,GAAG,KAAK,YAAY,WAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,CAAC;IAChE,MAAM,MAAM,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;IACpC,OAAO,IAAI,OAAO,CAAM,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;QACxC,IAAI,KAAU,CAAC;QACf,MAAM,EAAE,gBAAgB,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE;YACrC,IAAI,KAAK,EAAE;gBACP,cAAc,CAAC,KAAK,CAAC,CAAC;gBACtB,KAAK,GAAG,SAAS,CAAC;aACrB;YACD,MAAM,CAAC,WAAW,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC;QACH,KAAK,GAAG,YAAY,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;IAChF,CAAC,CAAC,CAAC;AACP,CAAC","sourcesContent":["import { clearImmediate, setImmediate } from \"@rhombus/set-immediate\";\n\nexport function setImmediateAsync(): Promise<void>;\nexport function setImmediateAsync(signal: AbortSignal): Promise<void>;\nexport function setImmediateAsync<T>(arg: T): Promise<T>;\nexport function setImmediateAsync<T>(signal: AbortSignal, arg: T): Promise<T>;\nexport function setImmediateAsync<T extends any[]>(...args: T): Promise<T>;\nexport function setImmediateAsync<T extends any[]>(signal: AbortSignal, ...args: T): Promise<T>;\nexport function setImmediateAsync(...args: any) {\n    const [first, ...rest] = args;\n    const signal = first instanceof AbortSignal ? first : undefined;\n    const params = signal ? rest : args;\n    return new Promise<any>((resolve, reject) => {\n        let token: any;\n        signal?.addEventListener('abort', (ev) => {\n            if (token) {\n                clearImmediate(token);\n                token = undefined;\n            }\n            reject('cancelled');\n        });\n        token = setImmediate(() => resolve(params.length === 1 ? params[0] : args));\n    });\n}"]}