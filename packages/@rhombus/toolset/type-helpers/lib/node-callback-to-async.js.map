{"version":3,"file":"node-callback-to-async.js","sourceRoot":"","sources":["../src/node-callback-to-async.ts"],"names":[],"mappings":"AASA,MAAM,UAAU,mBAAmB,CAAwB,EAAK;IAC5D,OAAO,CAAC,GAAG,IAAkB,EAAE,EAAE,CAAC,IAAI,OAAO,CAAiB,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;QAC9E,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,GAAQ,EAAE,MAAW,EAAE,EAAE;YAClC,IAAI,GAAG,KAAK,SAAS,EAAE;gBACnB,MAAM,CAAC,GAAG,CAAC,CAAC;aACf;iBAAM;gBACH,OAAO,CAAC,MAAM,CAAC,CAAC;aACnB;QACL,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC;AACP,CAAC","sourcesContent":["import { Action } from '@rhombus/func';\r\n\r\n\r\ntype InferArgs<F extends NodeStyleFn> = F extends NodeStyleFn<infer args, any> ? args : never;\r\ntype InferResult<F extends NodeStyleFn> = F extends NodeStyleFn<any, infer result> ? result : never;\r\n\r\ntype Callback<TResult = any, TError = any> = Action<[error: TError, result: TResult]>;\r\ntype NodeStyleFn<Args extends any[] = any[], TResult = any> = Action<[...args: Args, callback: Callback<TResult>]>;\r\n\r\nexport function nodeCallbackToAsync<T extends NodeStyleFn>(fn: T) {\r\n    return (...args: InferArgs<T>) => new Promise<InferResult<T>>((resolve, reject) => {\r\n        fn(...args, (err: any, result: any) => {\r\n            if (err !== undefined) {\r\n                reject(err);\r\n            } else {\r\n                resolve(result);\r\n            }\r\n        });\r\n    });\r\n}\r\n"]}